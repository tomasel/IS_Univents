<%- include('../header') -%>

<h1>comunita_studenti</h1>
<style>
.div{
  height: 50px;
  width: 500px;
  background-color: #f0d6d6;
  border: 5px solid red;
  border-radius: 20px;
  padding: 20px;
  text-align: center;
  margin: 10px;
}
.puppet{
  height: 0px;
  width: 500px;
  top: 70px;
  left: 40%; 
  position: absolute;
}

</style>

<template>
  <div class="div"></div>
</template>

<div class="puppet" id="puppet"></div>

<div id="comunita_studenti">
  
  <script>

    document.addEventListener('DOMContentLoaded', function() {
      
      fetch('http://localhost:3000/api/v1/eventi',{
        method:"GET",
        cache:'no-cache',
        headers:{
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        }
      })
        .then((res) =>{
          return res.json()
        } )
        .then((data) => {
          var i,item,clone;
          for(i=0;i<data.length;i++){
            // alert(i);
            item = document.getElementsByTagName("template")[0].content.querySelector("div");
            // alert(item);
            clone = document.importNode(item,true);
            // alert(clone);
            clone.setAttribute('style', 'white-space: pre;');
            clone.textContent=data[i].title+"\r\n";
            clone.textContent+=data[i].date_event.slice(0,10)+" alle "+data[i].date_event.slice(11,16)+", "+data[i].place;
            // alert(clone.textContent);
            document.getElementById("puppet").appendChild(clone);
          }
      })

      }, false);

  </script>

  <form method="get" action="/comunita_studenti/crea_evento">
    <p>
      <input type="submit" value="crea_evento">
    </p>
  </form>

  <li>
    <a href="/home">Home</a>
  </li>
  <li>
    <a href="/universita">Universit√†</a>
  </li>

  <p>
    <label id="puppet" x="75%" y="0"></label>
  </p>

</div>

<%- include('../footer') -%>
