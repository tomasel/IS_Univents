<%- include('../header') -%>

<style>
    body{
        background-color: #dddddd;
    }
  </style>
  <div style="height: 90%; width:20%;background-color: white; border-radius: 20px; position:absolute; top:-20px; left:15%; text-align: center;">
    <font face="Helvetica Neue" color="#B10B25" style="font-size:60px;">
      <br>
      <b>Univents</b>
    </font>
    <font face="Helvetica Neue" color="black" style="font-size:30px;">
      <br>
      <b>The community <br>for students</b>
    </font>
    <img src="/images/univents_logo/univents_vents_logo.png" width="205" height="220"  alt="univents_logo">
    <br><br><br><br><br>
    <form method="get" action="/home">
        <p>
            <label for="username">Username:</label>
            <input type="text" name="username" id="username">
        </p>
        <p>
            <label for="password">Password:</label>
            <input type="password" name="password" id="password">
        </p>
        <p>
            <p id="error" for="button"></p>
            <input class="button" type="button" value="Login" onclick="checkLogin(this);">
        </p
    </form>
  </div>
  <img src="/images/sigillo_universita/ti_1000x1000.png" height="100%"  alt="univents_logo" 
      style="position:fixed; top:0px; right:0px;">

</form>

<script>
// controlla se i campi sono vuoti
// controlla se l'utente esiste sul database, se esiste controlla se la password Ã¨ corretta
function checkLogin (button) {
    var user = document.getElementById("username").value;
    var pass = document.getElementById("password").value;
    if (user === "" || pass === "") {
        alert("Fill both username and password!");
    } else {
        // controllo utente
        // TODO alla fine redirect utente a window.location = "../home";
        fetch("http://localhost:3000/api/v1/check_login",{
              method: "POST",
              headers:{          
                'Accept': 'application/json',
                'Content-Type': 'application/json'
              },
              body:JSON.stringify({
                userId: user,
                userPsw: pass
              })
            })
        .then(res=>res.json())
        .then(json => {
            console.log('parsed json', json) // access json.body here
        })
        .catch(err=>console.log(err));
    }
}
</script>


<%- include('../footer') -%>
